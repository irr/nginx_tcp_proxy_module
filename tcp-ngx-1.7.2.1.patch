diff -rupN ngx_openresty-1.7.2.1-original/bundle/nginx-1.7.2/src/core/ngx_log.c ngx_openresty-1.7.2.1/bundle/nginx-1.7.2/src/core/ngx_log.c
--- ngx_openresty-1.7.2.1-original/bundle/nginx-1.7.2/src/core/ngx_log.c	2014-07-14 09:36:37.587984536 -0300
+++ ngx_openresty-1.7.2.1/bundle/nginx-1.7.2/src/core/ngx_log.c	2014-06-17 09:51:26.000000000 -0300
@@ -69,7 +69,7 @@ static ngx_str_t err_levels[] = {
 
 static const char *debug_levels[] = {
     "debug_core", "debug_alloc", "debug_mutex", "debug_event",
-    "debug_http", "debug_mail", "debug_mysql", "debug_tcp"
+    "debug_http", "debug_mail", "debug_mysql"
 };
 
 
diff -rupN ngx_openresty-1.7.2.1-original/bundle/nginx-1.7.2/src/core/ngx_log.h ngx_openresty-1.7.2.1/bundle/nginx-1.7.2/src/core/ngx_log.h
--- ngx_openresty-1.7.2.1-original/bundle/nginx-1.7.2/src/core/ngx_log.h	2014-07-14 09:36:48.924266753 -0300
+++ ngx_openresty-1.7.2.1/bundle/nginx-1.7.2/src/core/ngx_log.h	2014-07-12 23:56:25.000000000 -0300
@@ -30,15 +30,14 @@
 #define NGX_LOG_DEBUG_HTTP        0x100
 #define NGX_LOG_DEBUG_MAIL        0x200
 #define NGX_LOG_DEBUG_MYSQL       0x400
-#define NGX_LOG_DEBUG_TCP         0x800
- 
+
 /*
  * do not forget to update debug_levels[] in src/core/ngx_log.c
  * after the adding a new debug level
  */
 
 #define NGX_LOG_DEBUG_FIRST       NGX_LOG_DEBUG_CORE
-#define NGX_LOG_DEBUG_LAST        NGX_LOG_DEBUG_TCP
+#define NGX_LOG_DEBUG_LAST        NGX_LOG_DEBUG_MYSQL
 #define NGX_LOG_DEBUG_CONNECTION  0x80000000
 #define NGX_LOG_DEBUG_ALL         0x7ffffff0
 
diff -rupN ngx_openresty-1.7.2.1-original/bundle/nginx-1.7.2/src/event/ngx_event_connect.h ngx_openresty-1.7.2.1/bundle/nginx-1.7.2/src/event/ngx_event_connect.h
--- ngx_openresty-1.7.2.1-original/bundle/nginx-1.7.2/src/event/ngx_event_connect.h	2014-07-14 09:38:00.693053437 -0300
+++ ngx_openresty-1.7.2.1/bundle/nginx-1.7.2/src/event/ngx_event_connect.h	2014-06-17 09:51:26.000000000 -0300
@@ -18,8 +18,7 @@
 #define NGX_PEER_NEXT                2
 #define NGX_PEER_FAILED              4
 
-#define NGX_INVALID_CHECK_INDEX (ngx_uint_t)(-1)
- 
+
 typedef struct ngx_peer_connection_s  ngx_peer_connection_t;
 
 typedef ngx_int_t (*ngx_event_get_peer_pt)(ngx_peer_connection_t *pc,
@@ -44,8 +43,6 @@ struct ngx_peer_connection_s {
 
     ngx_uint_t                       tries;
 
-    ngx_uint_t                       check_index;
-
     ngx_event_get_peer_pt            get;
     ngx_event_free_peer_pt           free;
     void                            *data;
